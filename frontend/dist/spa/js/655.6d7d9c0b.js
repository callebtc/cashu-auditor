"use strict";(globalThis["webpackChunkcashu_auditor_frontend"]=globalThis["webpackChunkcashu_auditor_frontend"]||[]).push([[655],{1655:(t,e,a)=>{a.r(e),a.d(e,{default:()=>ke});var n=a(1758);function o(t,e,a,o,l,s){const r=(0,n.g2)("StatsCard"),i=(0,n.g2)("GlobalSwapBarChart"),c=(0,n.g2)("MintList"),u=(0,n.g2)("MintGraph"),d=(0,n.g2)("SwapList");return(0,n.uX)(),(0,n.CE)(n.FK,null,[e[0]||(e[0]=(0,n.Lk)("div",{class:"q-pa-md"},[(0,n.Lk)("h1",{class:"text-h6"},"Lightning Auditor"),(0,n.Lk)("p",null," Donate Ecash from any Cashu mint so it can be audited perpetually. This app sends random Lightning payments between mints. Forever. The sats go in a circle until all is lost to fees or rugs. If a mint fails to pay an invoice, it is marked with a scary red label. ")],-1)),(0,n.bF)(r),(0,n.bF)(i,{maxSwaps:1e3}),(0,n.bF)(c),(0,n.bF)(u),(0,n.bF)(d)],64)}var l=a(8790),s=a(9104);const r={class:"text-left",style:{"font-family":"monospace"}},i={class:"text-left"},c={class:"text-left"},u={class:"text-left"},d={class:"text-left"},p={class:"text-left"};function m(t,e,a,o,m,v){const f=(0,n.g2)("TokenInput"),g=(0,n.g2)("q-tooltip"),h=(0,n.g2)("q-btn"),b=(0,n.g2)("q-icon"),k=(0,n.g2)("q-badge"),w=(0,n.g2)("q-table"),y=(0,n.g2)("MintSwapStats");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(f,{token:t.token,"onUpdate:token":e[0]||(e[0]=e=>t.token=e),submittingToken:t.submittingToken,error:t.error,onSubmit:t.submitToken},null,8,["token","submittingToken","error","onSubmit"]),(0,n.bF)(w,{title:"Mints",rows:t.mints,columns:t.columns,"row-key":"id",loading:t.loading,"hide-bottom":t.mints.length>0,"rows-per-page-options":[0],onRowClick:t.onRowClick},{"top-right":(0,n.k6)((()=>e[2]||(e[2]=[(0,n.Lk)("div",{class:"text-caption text-grey-7"},"Click on a mint to get more information",-1)]))),"body-cell-url":(0,n.k6)((a=>[(0,n.Lk)("td",r,[(0,n.eW)((0,l.v_)(a.row.url)+" ",1),(0,n.bF)(h,{flat:"",round:"",dense:"",size:"xs",icon:"content_copy",onClick:(0,s.D$)((e=>t.copyToClipboard(a.row.url)),["stop"]),class:"copy-btn"},{default:(0,n.k6)((()=>[(0,n.bF)(g,null,{default:(0,n.k6)((()=>e[3]||(e[3]=[(0,n.eW)("Copy URL")]))),_:1})])),_:2},1032,["onClick"])])])),"body-cell-updated_at":(0,n.k6)((e=>[(0,n.Lk)("td",i,(0,l.v_)(t.formatDate(e.row.updated_at)),1)])),"body-cell-next_update":(0,n.k6)((e=>[(0,n.Lk)("td",c,(0,l.v_)(t.formatDate(e.row.next_update)),1)])),"body-cell-state":(0,n.k6)((e=>[(0,n.Lk)("td",u,[(0,n.bF)(b,{name:t.getStateIcon(e.row.state).name,color:t.getStateIcon(e.row.state).color},null,8,["name","color"])])])),"body-cell-n_errors":(0,n.k6)((t=>[(0,n.Lk)("td",d,[(0,n.bF)(k,{color:t.row.n_errors>0&&"ERROR"==t.row.state?"negative":"grey-7"},{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(t.row.n_errors),1)])),_:2},1032,["color"])])])),"body-cell-n_melts":(0,n.k6)((t=>[(0,n.Lk)("td",p,[(0,n.bF)(k,{color:t.row.n_melts>0&&"OK"==t.row.state?"positive":"grey-7","text-color":"dark"},{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(t.row.n_melts),1)])),_:2},1032,["color"])])])),_:1},8,["rows","columns","loading","hide-bottom","onRowClick"]),t.selectedMint?((0,n.uX)(),(0,n.Wv)(y,{key:0,modelValue:t.showSwapStats,"onUpdate:modelValue":e[1]||(e[1]=e=>t.showSwapStats=e),mint:t.selectedMint},null,8,["modelValue","mint"])):(0,n.Q3)("",!0)])}var v=a(8734),f=a(2303);const g=f.A.create({baseURL:"https://api.audit.8333.space",headers:{"Content-Type":"application/json"}}),h=g;var b=function(t,e,a,n){function o(t){return t instanceof a?t:new a((function(e){e(t)}))}return new(a||(a=Promise))((function(a,l){function s(t){try{i(n.next(t))}catch(e){l(e)}}function r(t){try{i(n["throw"](t))}catch(e){l(e)}}function i(t){t.done?a(t.value):o(t.value).then(s,r)}i((n=n.apply(t,e||[])).next())}))};const k=(t=0,e=0)=>b(void 0,void 0,void 0,(function*(){const a=yield h.get("/mints/",{params:{skip:t,limit:e}});return console.log("API Response:",a.data),a.data})),w=t=>b(void 0,void 0,void 0,(function*(){const e=yield h.post("/mints/",t);return console.log("API Response:",e.data),e.data})),y=(t=0,e=10)=>b(void 0,void 0,void 0,(function*(){const a=yield h.get("/swaps/",{params:{skip:t,limit:e}});return console.log("API Response:",a.data),a.data})),_=()=>b(void 0,void 0,void 0,(function*(){const t=yield h.get("/graph/");return console.log("API Response:",t.data),t.data})),x=()=>b(void 0,void 0,void 0,(function*(){const t=yield h.get("/stats/");return console.log("API Response:",t.data),t.data}));function S(t,e=0,a=10){return b(this,void 0,void 0,(function*(){const n=yield h.get(`/swaps/mint/${t}?skip=${e}&limit=${a}`);return n.data}))}const L={class:"text-h4 text-wrap"},T={class:"text-center text-wrap",style:{"font-family":"monospace"}},C={class:"row q-col-gutter-md q-px-md",style:{"flex-wrap":"nowrap"}},R={class:"text-h5"},F={class:"text-caption"},q={class:"text-h5"},A={style:{"font-family":"monospace"}},M={key:0,class:"text-secondary q-pa-md text-center",style:{"font-size":"1.2rem"}},E={key:1,class:"text-secondary q-pa-md text-center",style:{"font-size":"1.2rem"}};function D(t,e,a,o,s,r){const i=(0,n.g2)("q-icon"),c=(0,n.g2)("q-card-actions"),u=(0,n.g2)("q-card-section"),d=(0,n.g2)("q-img"),p=(0,n.g2)("q-avatar"),m=(0,n.g2)("q-btn"),v=(0,n.g2)("q-card"),f=(0,n.g2)("MintSwapBarChart"),g=(0,n.g2)("q-item-label"),h=(0,n.g2)("q-item-section"),b=(0,n.g2)("q-item"),k=(0,n.g2)("q-list"),w=(0,n.g2)("q-dialog"),y=(0,n.gN)("close-popup");return(0,n.uX)(),(0,n.Wv)(w,{modelValue:t.show,"onUpdate:modelValue":e[1]||(e[1]=e=>t.show=e),maximized:t.$q.screen.lt.md,"transition-show":"fade","transition-hide":"fade"},{default:(0,n.k6)((()=>[(0,n.bF)(v,{class:"bg-dark q-pa-sm text-white rounded-borders",style:(0,l.Tr)(t.$q.screen.gt.sm?{"min-width":"600px"}:null)},{default:(0,n.k6)((()=>[(0,n.bF)(c,{class:"close-button-container"},{default:(0,n.k6)((()=>[(0,n.bo)((0,n.bF)(i,{name:"close",class:"cursor-pointer text-white"},null,512),[[y]])])),_:1}),(0,n.bF)(u,{class:(0,l.C4)(["row justify-center text-center q-px-xl",(t.mintIconUrl,"q-pb-md")])},{default:(0,n.k6)((()=>[(0,n.Lk)("div",L,(0,l.v_)(t.mint.name||t.mint.url),1)])),_:1},8,["class"]),t.mintIconUrl?((0,n.uX)(),(0,n.Wv)(u,{key:0,class:"row justify-center q-pb-lg q-pt-none"},{default:(0,n.k6)((()=>[(0,n.bF)(p,{size:"75px",class:"q-mb-none"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{"spinner-color":"white","spinner-size":"xs",src:t.mintIconUrl,alt:"Mint Icon",style:{height:"75px","max-width":"75px","font-size":"12px"}},null,8,["src"])])),_:1})])),_:1})):(0,n.Q3)("",!0),(0,n.bF)(u,{class:"row justify-center q-pb-lg q-pt-none"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",T,(0,l.v_)(t.mint.url),1),(0,n.bF)(m,{flat:"",round:"",dense:"",size:"xs",class:"q-ml-sm",style:{"margin-top":"2px"},icon:"content_copy",onClick:e[0]||(e[0]=e=>t.copyToClipboard(t.mint.url,"Mint URL copied to clipboard"))})])),_:1}),(0,n.bF)(u,{class:"q-py-none"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",C,[(0,n.bF)(v,{class:"col-6 stat-card"},{default:(0,n.k6)((()=>[(0,n.bF)(u,null,{default:(0,n.k6)((()=>[e[2]||(e[2]=(0,n.Lk)("div",{class:"text-subtitle1"},"Success Rate",-1)),(0,n.Lk)("div",R,(0,l.v_)(t.successRate)+"%",1),(0,n.Lk)("div",F,(0,l.v_)(t.successfulSwaps)+" of "+(0,l.v_)(t.swaps.length)+" swaps ",1)])),_:1})])),_:1}),(0,n.bF)(v,{class:"col-6 stat-card q-ml-md"},{default:(0,n.k6)((()=>[(0,n.bF)(u,null,{default:(0,n.k6)((()=>[e[3]||(e[3]=(0,n.Lk)("div",{class:"text-subtitle1"},"Average Time",-1)),(0,n.Lk)("div",q,(0,l.v_)(t.formatTime(t.averageTime)),1),e[4]||(e[4]=(0,n.Lk)("div",{class:"text-caption"}," For successful swaps ",-1))])),_:1})])),_:1})])])),_:1}),t.swaps.length>0?((0,n.uX)(),(0,n.Wv)(u,{key:1,class:"q-pb-none"},{default:(0,n.k6)((()=>[(0,n.bF)(f,{swaps:t.swaps},null,8,["swaps"])])),_:1})):(0,n.Q3)("",!0),(0,n.bF)(u,null,{default:(0,n.k6)((()=>[e[11]||(e[11]=(0,n.Lk)("div",{class:"text-h6 q-mb-md"},"Recent Swaps",-1)),(0,n.bF)(k,{bordered:"",separator:"",class:"scroll",style:{"max-height":"400px"},ref:"swapList"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.swaps,(a=>((0,n.uX)(),(0,n.Wv)(b,{key:a.id,class:"q-py-md"},{default:(0,n.k6)((()=>[(0,n.bF)(h,null,{default:(0,n.k6)((()=>[(0,n.bF)(g,null,{default:(0,n.k6)((()=>[e[5]||(e[5]=(0,n.Lk)("span",{class:"text-bold"},"To:",-1)),e[6]||(e[6]=(0,n.eW)()),(0,n.Lk)("span",A,(0,l.v_)(a.to_url),1)])),_:2},1024),(0,n.bF)(g,null,{default:(0,n.k6)((()=>[e[7]||(e[7]=(0,n.Lk)("span",{class:"text-bold"},"Amount:",-1)),(0,n.eW)(" "+(0,l.v_)(a.amount)+" sat ",1)])),_:2},1024),(0,n.bF)(g,null,{default:(0,n.k6)((()=>[e[8]||(e[8]=(0,n.Lk)("span",{class:"text-bold"},"Time:",-1)),(0,n.eW)(" "+(0,l.v_)(t.formatDate(a.created_at)),1)])),_:2},1024),"OK"===a.state?((0,n.uX)(),(0,n.Wv)(g,{key:0,caption:""},{default:(0,n.k6)((()=>[e[9]||(e[9]=(0,n.Lk)("span",{class:"text-bold"},"Fee:",-1)),(0,n.eW)(" "+(0,l.v_)(a.fee)+" sat ",1),a.time_taken?((0,n.uX)(),(0,n.Wv)(g,{key:0,caption:""},{default:(0,n.k6)((()=>[(0,n.eW)(" Payment took "+(0,l.v_)(a.time_taken)+" ms ",1)])),_:2},1024)):(0,n.Q3)("",!0)])),_:2},1024)):(0,n.Q3)("",!0),"ERROR"===a.state&&a.error?((0,n.uX)(),(0,n.Wv)(g,{key:1,caption:""},{default:(0,n.k6)((()=>[e[10]||(e[10]=(0,n.Lk)("span",{class:"text-bold"},"Error:",-1)),(0,n.eW)(" "+(0,l.v_)(a.error),1)])),_:2},1024)):(0,n.Q3)("",!0)])),_:2},1024),(0,n.bF)(h,{side:""},{default:(0,n.k6)((()=>[(0,n.bF)(i,{name:"OK"===a.state?"check_circle":"cancel",color:"OK"===a.state?"positive":"negative"},null,8,["name","color"])])),_:2},1024)])),_:2},1024)))),128)),(0,n.bF)(b,{class:"q-pa-md"},{default:(0,n.k6)((()=>[(0,n.bF)(h,{class:"q-flex justify-center"},{default:(0,n.k6)((()=>[t.loadingInitial||0!==t.swaps.length?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",M," No swaps found ")),t.allLoaded&&t.swaps.length>0?((0,n.uX)(),(0,n.CE)("div",E," All swaps loaded ")):(0,n.Q3)("",!0),(0,n.bF)(g,{class:"text-center"},{default:(0,n.k6)((()=>[t.allLoaded?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(m,{key:0,label:"Load More Swaps",outline:"",color:"primary",onClick:t.loadMoreSwaps,disabled:t.loadingMore,loading:t.loadingMore},null,8,["onClick","disabled","loading"]))])),_:1})])),_:1})])),_:1})])),_:1},512)])),_:1})])),_:1},8,["style"])])),_:1},8,["modelValue","maximized"])}const Q={class:"bar-chart-container",ref:"chartContainer"},I={class:"chart-wrapper"},K={class:"bars-container"},W=["onMouseover"],$={class:"time-axis"},X=["innerHTML"];function B(t,e,a,o,s,r){return(0,n.uX)(),(0,n.CE)("div",Q,[(0,n.Lk)("div",I,[(0,n.Lk)("div",K,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.displayBuckets,((a,o)=>((0,n.uX)(),(0,n.CE)("div",{key:`bucket-${o}`,class:(0,l.C4)(["bar",{placeholder:0===a.count}]),style:(0,l.Tr)({width:`${t.barWidth}px`,left:o*(t.barWidth+t.spacing)+"px",backgroundColor:a.count>0?t.getSuccessColor(a.successRate):"transparent"}),onMouseover:e=>t.showBucketTooltip(e,a),onMouseleave:e[0]||(e[0]=(...e)=>t.hideTooltip&&t.hideTooltip(...e))},null,46,W)))),128))]),(0,n.Lk)("div",$,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.timeTicks,((e,a)=>((0,n.uX)(),(0,n.CE)("div",{key:a,class:"time-tick",style:(0,l.Tr)({left:a/(t.timeTicks.length-1)*100+"%",display:a===t.timeTicks.length-1?"none":"block"})},(0,l.v_)(t.formatTime(e)),5)))),128))])]),t.tooltip.show?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"tooltip",style:(0,l.Tr)({left:t.tooltip.x+"px",top:t.tooltip.y+"px"})},[(0,n.Lk)("div",{innerHTML:t.tooltip.content},null,8,X)],4)):(0,n.Q3)("",!0)],512)}const N=(0,n.pM)({name:"MintSwapBarChart",props:{swaps:{type:Array,required:!0},minBars:{type:Number,default:16},maxPossibleBars:{type:Number,default:200},barSpacing:{type:Number,default:2},minBarWidth:{type:Number,default:2}},setup(t){const e=(0,v.KR)({show:!1,x:0,y:0,content:""}),a=(0,v.KR)(null),o=(0,v.KR)(0),l=(0,n.EW)((()=>t.barSpacing)),s=(0,n.EW)((()=>t.minBarWidth)),r=(0,n.EW)((()=>{if(o.value<=0)return t.minBars;const e=200,a=2600;if(o.value<=e)return t.minBars;if(o.value>=a)return t.maxPossibleBars;{const n=(o.value-e)/(a-e);return Math.floor(t.minBars+n*(t.maxPossibleBars-t.minBars))}})),i=(0,n.EW)((()=>{if(o.value<=0)return r.value;const t=Math.floor((o.value+l.value)/(s.value+l.value));return Math.min(t,r.value)})),c=(0,n.EW)((()=>o.value<=0||i.value<=0?s.value:Math.max(s.value,(o.value-l.value*(i.value-1))/i.value))),u=()=>{if(a.value){const t=a.value.querySelector(".bars-container");t&&(o.value=t.clientWidth)}};(0,n.sV)((()=>{u();const t=new ResizeObserver((()=>{u()}));return a.value&&t.observe(a.value),window.addEventListener("resize",u),()=>{t.disconnect(),window.removeEventListener("resize",u)}}));const d=(0,n.EW)((()=>{if(0===t.swaps.length)return[];const e=new Date(t.swaps[0].created_at).getTime(),a=new Date(t.swaps[t.swaps.length-1].created_at).getTime(),n=(e-a)/3;return Array.from({length:4},((t,e)=>new Date(a+n*e)))})),p=(0,n.EW)((()=>{if(0===t.swaps.length)return Array(i.value).fill({swaps:[],count:0,successCount:0,successRate:0,startTime:new Date,endTime:new Date});const e=[...t.swaps].sort(((t,e)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime())),a=new Date(e[e.length-1].created_at).getTime(),n=new Date(e[0].created_at).getTime(),o=a-n,l=Array(i.value).fill(null).map((()=>({swaps:[],count:0,successCount:0,successRate:0,startTime:new Date,endTime:new Date})));if(0===o)return l[0].swaps=[...e],l[0].count=e.length,l[0].successCount=e.filter((t=>"OK"===t.state)).length,l[0].successRate=l[0].count>0?l[0].successCount/l[0].count:0,l[0].startTime=new Date(n),l[0].endTime=new Date(a),l;const s=o/i.value;for(let t=0;t<i.value;t++){const e=i.value-1-t,a=n+e*s,o=n+(e+1)*s;l[t].startTime=new Date(a),l[t].endTime=new Date(o)}return e.forEach((t=>{const e=new Date(t.created_at).getTime(),a=(e-n)/o,s=1-a,r=Math.min(Math.floor(s*i.value),i.value-1);r>=0&&(l[r].swaps.push(t),l[r].count++,"OK"===t.state&&l[r].successCount++)})),l.forEach((t=>{t.successRate=t.count>0?t.successCount/t.count:0})),l})),m=t=>{if(1===t)return"#4CAF50";if(0===t)return"#f44336";if(t<.5){const e=244,a=Math.floor(67+2*t*98),n=54;return`rgb(${e}, ${a}, ${n})`}{const e=Math.floor(244-2*(t-.5)*168),a=Math.floor(165+2*(t-.5)*10),n=Math.floor(54-2*(t-.5)*4);return`rgb(${e}, ${a}, ${n})`}},f=e=>{if(t.swaps.length>0){const a=new Date(t.swaps[t.swaps.length-1].created_at).getTime();if(Math.abs(e.getTime()-a)<1e3)return"Now"}const a=new Date,n=e.toDateString()===a.toDateString(),o=new Date(a.setDate(a.getDate()-1)).toDateString()===e.toDateString();let l="";return l=n?"Today":o?"Yesterday":e.toLocaleDateString(void 0,{month:"short",day:"numeric"}),`${l} ${e.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!1})}`},g=t=>{const e=/([Zz]|[+\-]\d{2}:\d{2})$/.test(t);let a=t;e||(a+="Z");const n=new Date(a);if(isNaN(n.getTime()))return"Invalid Date";const o=new Date,l=n.toDateString()===o.toDateString(),s=new Date(o.setDate(o.getDate()-1)).toDateString()===n.toDateString();let r="";return r=l?"Today":s?"Yesterday":n.toLocaleDateString(void 0,{month:"short",day:"numeric"}),`${r} ${n.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!1})}`},h=(t,a)=>{if(0===a.count)return void b();const n=Math.round(100*a.successRate);let o="";a.startTime&&a.endTime&&(o=`${g(a.startTime.toISOString())} - ${g(a.endTime.toISOString())}`),e.value={show:!0,x:t.clientX+10,y:t.clientY+10,content:`\n          <div><b>Swaps:</b> ${a.count}</div>\n          <div><b>Success rate:</b> ${n}% (${a.successCount}/${a.count})</div>\n          <div><b>Time range:</b> ${o}</div>\n        `}},b=()=>{e.value.show=!1};return{tooltip:e,timeTicks:d,displayBuckets:p,chartContainer:a,barsCount:i,barWidth:c,spacing:l,maxBars:r,formatTime:f,formatDate:g,showBucketTooltip:h,hideTooltip:b,getSuccessColor:m}}});var O=a(2807);const V=(0,O.A)(N,[["render",B],["__scopeId","data-v-98d49a96"]]),z=V;var P=a(989);const U=(t,e="Copied to clipboard")=>{navigator.clipboard.writeText(t).then((()=>{P.A.create({message:e,color:"positive",position:"top",timeout:1500})})).catch((t=>{console.error("Failed to copy text: ",t),P.A.create({message:"Failed to copy",color:"negative",position:"top"})}))};var j=function(t,e,a,n){function o(t){return t instanceof a?t:new a((function(e){e(t)}))}return new(a||(a=Promise))((function(a,l){function s(t){try{i(n.next(t))}catch(e){l(e)}}function r(t){try{i(n["throw"](t))}catch(e){l(e)}}function i(t){t.done?a(t.value):o(t.value).then(s,r)}i((n=n.apply(t,e||[])).next())}))};const G=(0,n.pM)({name:"MintSwapStats",components:{MintSwapBarChart:z},props:{modelValue:{type:Boolean,required:!0},mint:{type:Object,required:!0}},emits:["update:modelValue"],setup(t,{emit:e}){const a=(0,v.KR)([]),o=(0,v.KR)(!1),l=(0,v.KR)(!1),s=(0,v.KR)(0),r=100,i=(0,v.KR)(!1),c=(0,v.KR)(null),u=(0,v.KR)(void 0),d=(0,n.EW)({get:()=>t.modelValue,set:t=>e("update:modelValue",t)});(0,n.wB)(d,(e=>{e&&(s.value=0,i.value=!1,g("initial"),y(t.mint))}));const p=(0,n.EW)((()=>a.value.filter((t=>"OK"===t.state)).length)),m=(0,n.EW)((()=>0===a.value.length?0:Math.round(p.value/a.value.length*100))),f=(0,n.EW)((()=>{const t=a.value.filter((t=>"OK"===t.state&&t.time_taken));if(0===t.length)return 0;const e=t.reduce(((t,e)=>t+(e.time_taken||0)),0);return e/t.length})),g=e=>j(this,void 0,void 0,(function*(){"initial"===e?o.value=!0:l.value=!0;try{const n=yield S(t.mint.id,s.value,r);a.value="initial"===e?n:[...a.value,...n],s.value+=r,i.value=n.length<r}catch(n){console.error("Error fetching swaps:",n)}finally{"initial"===e?o.value=!1:l.value=!1}})),h=()=>j(this,void 0,void 0,(function*(){var t;if(i.value||l.value)return;const e=(null===(t=c.value)||void 0===t?void 0:t.scrollTop)||0;yield g("more"),(0,n.dY)((()=>{c.value&&(c.value.scrollTop=e)}))})),b=t=>{if(0===t)return"N/A";const e=t/1e3;return e<10?`${t.toFixed(0)} ms`:`${e.toFixed(2)} s`},k=t=>{const e=/([Zz]|[+\-]\d{2}:\d{2})$/.test(t);let a=t;e||(a+="Z");const n=new Date(a);if(isNaN(n.getTime()))return console.error(`Invalid date string: ${t}`),"Invalid Date";const o={hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},l={year:"numeric",month:"short",day:"numeric"},s=n.toLocaleTimeString(void 0,o),r=n.toLocaleDateString(void 0,l);return`${s}, ${r}`},w=t=>`Mint ${t}`,y=t=>j(this,void 0,void 0,(function*(){try{u.value=void 0;const e=yield fetch(t.url+"/v1/info"),a=yield e.json();if(!a.icon_url||!a.icon_url.startsWith("https://")&&!a.icon_url.startsWith("http://"))return;u.value=a.icon_url}catch(e){console.error("Error fetching mint icon:",e),u.value=void 0}}));return(0,n.sV)((()=>{g("initial"),y(t.mint)})),{swapList:c,show:d,swaps:a,loadingInitial:o,loadingMore:l,allLoaded:i,successRate:m,successfulSwaps:p,averageTime:f,formatTime:b,getMintName:w,loadMoreSwaps:h,formatDate:k,mintIconUrl:u,copyToClipboard:U}}});var Y=a(558),Z=a(3316),H=a(2669),J=a(492),tt=a(4189),et=a(3952),at=a(2665),nt=a(1693),ot=a(3999),lt=a(124),st=a(5173),rt=a(3796),it=a(8672),ct=a(8582),ut=a.n(ct);const dt=(0,O.A)(G,[["render",D],["__scopeId","data-v-38f6151b"]]),pt=dt;ut()(G,"components",{QDialog:Y.A,QCard:Z.A,QCardActions:H.A,QIcon:J.A,QCardSection:tt.A,QAvatar:et.A,QImg:at.A,QBtn:nt.A,QList:ot.A,QItem:lt.A,QItemSection:st.A,QItemLabel:rt.A}),ut()(G,"directives",{ClosePopup:it.A});const mt={class:"q-pa-md"},vt={key:0,class:"text-negative q-pa-md"};function ft(t,e,a,o,r,i){const c=(0,n.g2)("q-item-label"),u=(0,n.g2)("q-spinner"),d=(0,n.g2)("q-btn"),p=(0,n.g2)("q-input");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",mt,[(0,n.bF)(c,{class:"text-h6 q-mb-md",color:"white"},{default:(0,n.k6)((()=>e[1]||(e[1]=[(0,n.eW)("Donate Ecash")]))),_:1}),(0,n.bF)(p,{filled:"",modelValue:t.tokenValue,"onUpdate:modelValue":e[0]||(e[0]=e=>t.tokenValue=e),label:"Enter Token",onKeyup:(0,s.jR)(t.handleSubmit,["enter"]),class:"rounded-borders"},{append:(0,n.k6)((()=>[(0,n.bF)(d,{color:"primary",onClick:t.handleSubmit},{default:(0,n.k6)((()=>[t.submitting?((0,n.uX)(),(0,n.Wv)(u,{key:0,size:"15px",class:"q-mr-sm",color:"white"})):(0,n.Q3)("",!0),e[2]||(e[2]=(0,n.eW)("Submit "))])),_:1},8,["onClick"])])),_:1},8,["modelValue","onKeyup"])]),t.errorMessage?((0,n.uX)(),(0,n.CE)("div",vt,(0,l.v_)(t.errorMessage),1)):(0,n.Q3)("",!0)])}const gt=(0,n.pM)({name:"TokenInput",props:{token:{type:String,default:""},submittingToken:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["update:token","submit"],setup(t,{emit:e}){const a=(0,v.KR)(t.token),o=(0,v.KR)(t.submittingToken),l=(0,v.KR)(t.error);(0,n.wB)((()=>t.token),(t=>{a.value=t})),(0,n.wB)((()=>t.submittingToken),(t=>{o.value=t})),(0,n.wB)((()=>t.error),(t=>{l.value=t})),(0,n.wB)(a,(t=>{e("update:token",t)}));const s=()=>{e("submit")};return{tokenValue:a,submitting:o,errorMessage:l,handleSubmit:s}}});var ht=a(9270),bt=a(564);const kt=(0,O.A)(gt,[["render",ft],["__scopeId","data-v-7ebbab8b"]]),wt=kt;ut()(gt,"components",{QItemLabel:rt.A,QInput:ht.A,QBtn:nt.A,QSpinner:bt.A});var yt=function(t,e,a,n){function o(t){return t instanceof a?t:new a((function(e){e(t)}))}return new(a||(a=Promise))((function(a,l){function s(t){try{i(n.next(t))}catch(e){l(e)}}function r(t){try{i(n["throw"](t))}catch(e){l(e)}}function i(t){t.done?a(t.value):o(t.value).then(s,r)}i((n=n.apply(t,e||[])).next())}))};const _t=(0,n.pM)({name:"MintList",components:{MintSwapStats:pt,TokenInput:wt},setup(){const t=(0,v.KR)(""),e=(0,v.KR)([]),a=(0,v.KR)(!1),o=(0,v.KR)(!1),l=(0,v.KR)(""),s=(0,v.KR)(!1),r=(0,v.KR)(null),i=[{name:"url",label:"URL",field:"url",sortable:!0,align:"left"},{name:"name",label:"Name",field:"name",sortable:!0,align:"left"},{name:"version",label:"Version",field:"info",sortable:!0,align:"left"},{name:"balance",label:"Balance (sat)",field:"balance",sortable:!0,align:"left"},{name:"sum_donations",label:"Total donated (sat)",field:"sum_donations",sortable:!0,align:"left"},{name:"updated_at",label:"Updated At",field:"updated_at",sortable:!0,align:"left"},{name:"state",label:"State",field:"state",sortable:!0,align:"left"},{name:"n_errors",label:"Errors",field:"n_errors",sortable:!0,align:"left"},{name:"n_mints",label:"Mints",field:"n_mints",sortable:!0,align:"left"},{name:"n_melts",label:"Melts",field:"n_melts",sortable:!0,align:"left"}];let c;const u=()=>yt(this,void 0,void 0,(function*(){a.value=!0,l.value="";try{e.value=yield k(0,0),e.value.forEach((t=>{t.info&&(t.info=f(t.info))}))}catch(t){l.value="Error fetching mints.",console.error(t)}finally{a.value=!1}})),d=()=>yt(this,void 0,void 0,(function*(){if(t.value){o.value=!0,l.value="";try{yield w({token:t.value}),t.value="",yield u()}catch(e){l.value="Error submitting token.",console.error(e)}finally{o.value=!1}}})),p=t=>{const e=/([Zz]|[+\-]\d{2}:\d{2})$/.test(t);let a=t;e||(a+="Z");const n=new Date(a);if(isNaN(n.getTime()))return console.error(`Invalid date string: ${t}`),"Invalid Date";const o={hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},l={year:"numeric",month:"short",day:"numeric"},s=n.toLocaleTimeString(void 0,o),r=n.toLocaleDateString(void 0,l);return`${s}, ${r}`},m=t=>{switch(t){case"OK":return{name:"check_circle",color:"positive"};case"WARN":return{name:"warning",color:"warning"};case"ERROR":return{name:"cancel",color:"negative"};case"UNKNOWN":default:return{name:"help",color:"grey-7"}}},f=t=>{try{const e=JSON.parse(t);return e.version}catch(e){return""}},g=(t,e)=>{r.value=e,s.value=!0};return(0,n.sV)((()=>{u(),c=window.setInterval(u,6e4)})),(0,n.xo)((()=>{void 0!==c&&clearInterval(c)})),{token:t,mints:e,columns:i,loading:a,submittingToken:o,error:l,submitToken:d,formatDate:p,getStateIcon:m,getVersion:f,showSwapStats:s,selectedMint:r,onRowClick:g,copyToClipboard:U}}});var xt=a(5880),St=a(7410),Lt=a(3954);const Tt=(0,O.A)(_t,[["render",m],["__scopeId","data-v-7338b724"]]),Ct=Tt;ut()(_t,"components",{QTable:xt.A,QBtn:nt.A,QTooltip:St.A,QIcon:J.A,QBadge:Lt.A});const Rt={key:0,class:"q-pa-md flex justify-center"},Ft={key:2,class:"q-pa-md"},qt={key:3,class:"text-negative q-pa-md"},At={key:4,class:"text-secondary q-pa-md"},Mt={key:5,class:"text-secondary q-pa-md"};function Et(t,e,a,o,r,i){const c=(0,n.g2)("q-item-label"),u=(0,n.g2)("q-icon"),d=(0,n.g2)("q-item-section"),p=(0,n.g2)("q-tooltip"),m=(0,n.g2)("q-btn"),v=(0,n.g2)("q-item"),f=(0,n.g2)("q-separator"),g=(0,n.g2)("q-spinner"),h=(0,n.g2)("q-list");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(h,{bordered:"",padding:"",class:"q-pa-md"},{default:(0,n.k6)((()=>[(0,n.bF)(c,{header:"",class:"text-h6 q-mb-md"},{default:(0,n.k6)((()=>e[0]||(e[0]=[(0,n.eW)("Recent Swaps")]))),_:1}),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.swaps,(a=>((0,n.uX)(),(0,n.CE)("div",{key:a.id},[(0,n.bF)(v,{clickable:"",class:"q-my-md"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{avatar:""},{default:(0,n.k6)((()=>[(0,n.bF)(u,{name:"OK"===a.state?"check_circle":"cancel",color:"OK"===a.state?"positive":"negative"},null,8,["name","color"])])),_:2},1024),(0,n.bF)(d,null,{default:(0,n.k6)((()=>[(0,n.bF)(c,null,{default:(0,n.k6)((()=>[e[2]||(e[2]=(0,n.Lk)("span",{class:"text-bold"},"From:",-1)),(0,n.eW)(" "+(0,l.v_)(a.from_url)+" ",1),(0,n.bF)(m,{flat:"",round:"",dense:"",size:"xs",icon:"content_copy",onClick:(0,s.D$)((e=>t.copyToClipboard(a.from_url,"Source mint URL copied to clipboard")),["stop"]),class:"copy-btn"},{default:(0,n.k6)((()=>[(0,n.bF)(p,null,{default:(0,n.k6)((()=>e[1]||(e[1]=[(0,n.eW)("Copy URL")]))),_:1})])),_:2},1032,["onClick"])])),_:2},1024),(0,n.bF)(c,null,{default:(0,n.k6)((()=>[e[4]||(e[4]=(0,n.Lk)("span",{class:"text-bold"},"To:",-1)),(0,n.eW)(" "+(0,l.v_)(a.to_url)+" ",1),(0,n.bF)(m,{flat:"",round:"",dense:"",size:"xs",icon:"content_copy",onClick:(0,s.D$)((e=>t.copyToClipboard(a.to_url,"Destination mint URL copied to clipboard")),["stop"]),class:"copy-btn"},{default:(0,n.k6)((()=>[(0,n.bF)(p,null,{default:(0,n.k6)((()=>e[3]||(e[3]=[(0,n.eW)("Copy URL")]))),_:1})])),_:2},1032,["onClick"])])),_:2},1024),(0,n.bF)(c,null,{default:(0,n.k6)((()=>[e[5]||(e[5]=(0,n.Lk)("span",{class:"text-bold"},"Amount:",-1)),(0,n.eW)(" "+(0,l.v_)(a.amount)+" sat ",1)])),_:2},1024),"OK"===a.state?((0,n.uX)(),(0,n.Wv)(c,{key:0,caption:""},{default:(0,n.k6)((()=>[e[6]||(e[6]=(0,n.Lk)("span",{class:"text-bold"},"Fee:",-1)),(0,n.eW)(" "+(0,l.v_)(a.fee)+" sat ",1),a.time_taken?((0,n.uX)(),(0,n.Wv)(c,{key:0,caption:""},{default:(0,n.k6)((()=>[(0,n.eW)(" Payment took "+(0,l.v_)(a.time_taken)+" ms ",1)])),_:2},1024)):(0,n.Q3)("",!0)])),_:2},1024)):(0,n.Q3)("",!0),"ERROR"===a.state&&a.error?((0,n.uX)(),(0,n.Wv)(c,{key:1,caption:""},{default:(0,n.k6)((()=>[e[7]||(e[7]=(0,n.Lk)("span",{class:"text-bold"},"Error:",-1)),(0,n.eW)(" "+(0,l.v_)(a.error),1)])),_:2},1024)):(0,n.Q3)("",!0)])),_:2},1024),(0,n.bF)(d,{side:"",top:""},{default:(0,n.k6)((()=>[(0,n.bF)(c,{caption:""},{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(t.formatDate(a.created_at)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,n.bF)(f)])))),128)),t.allLoaded||t.loadingMore||t.loadingNewSwaps?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",Rt,[(0,n.bF)(m,{label:"Load More Swaps",outline:"",color:"primary",onClick:t.loadMoreSwaps,disabled:t.loadingMore},null,8,["onClick","disabled"])])),t.loadingMore?((0,n.uX)(),(0,n.Wv)(g,{key:1,color:"primary",size:"50px",class:"q-my-md"})):(0,n.Q3)("",!0),t.loadingNewSwaps?((0,n.uX)(),(0,n.CE)("div",Ft,[(0,n.bF)(g,{color:"primary",size:"30px"}),e[8]||(e[8]=(0,n.eW)(" Loading new swaps... "))])):(0,n.Q3)("",!0),t.error?((0,n.uX)(),(0,n.CE)("div",qt,(0,l.v_)(t.error),1)):(0,n.Q3)("",!0),t.allLoaded&&t.swaps.length>0?((0,n.uX)(),(0,n.CE)("div",At," All swaps loaded. ")):(0,n.Q3)("",!0),t.loadingInitial||0!==t.swaps.length||t.error?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",Mt," No swaps found. "))])),_:1})])}var Dt=function(t,e,a,n){function o(t){return t instanceof a?t:new a((function(e){e(t)}))}return new(a||(a=Promise))((function(a,l){function s(t){try{i(n.next(t))}catch(e){l(e)}}function r(t){try{i(n["throw"](t))}catch(e){l(e)}}function i(t){t.done?a(t.value):o(t.value).then(s,r)}i((n=n.apply(t,e||[])).next())}))};const Qt=(0,n.pM)({name:"SwapList",setup(){const t=(0,v.KR)([]),e=(0,v.KR)(!1),a=(0,v.KR)(!1),o=(0,v.KR)(!1),l=(0,v.KR)(""),s=(0,v.KR)(0),r=10,i=(0,v.KR)(!1),c=(0,v.KR)(new Set);let u;const d=t=>{const e=/([Zz]|[+\-]\d{2}:\d{2})$/.test(t);let a=t;e||(a+="Z");const n=new Date(a);if(isNaN(n.getTime()))return console.error(`Invalid date string: ${t}`),"Invalid Date";const o={hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},l={year:"numeric",month:"short",day:"numeric"},s=n.toLocaleTimeString(void 0,o),r=n.toLocaleDateString(void 0,l);return`${s}, ${r}`},p=n=>Dt(this,void 0,void 0,(function*(){"initial"===n?e.value=!0:"more"===n?a.value=!0:"new"===n&&(o.value=!0),l.value="";try{if("initial"===n){const e=yield y(0,r);t.value=e,c.value=new Set(e.map((t=>t.id))),s.value=r,i.value=e.length<r}else if("more"===n){const e=yield y(s.value,r),a=e.filter((t=>!c.value.has(t.id)));a.forEach((t=>c.value.add(t.id))),t.value=[...t.value,...a],s.value+=r,e.length<r&&(i.value=!0)}else if("new"===n){const e=yield y(0,r),a=e.filter((t=>!c.value.has(t.id)));a.length>0&&(a.forEach((t=>c.value.add(t.id))),t.value=[...a,...t.value])}t.value.sort(((t,e)=>new Date(e.created_at).getTime()-new Date(t.created_at).getTime()))}catch(u){l.value="Error fetching swaps.",console.error(u)}finally{"initial"===n?e.value=!1:"more"===n?a.value=!1:"new"===n&&(o.value=!1)}})),m=()=>Dt(this,void 0,void 0,(function*(){i.value||a.value||(yield p("more"))})),f=()=>Dt(this,void 0,void 0,(function*(){yield p("new")})),g=()=>Dt(this,void 0,void 0,(function*(){yield p("initial"),u=window.setInterval(f,6e4)}));return(0,n.xo)((()=>{void 0!==u&&clearInterval(u)})),(0,n.sV)((()=>{g()})),{swaps:t,loadingInitial:e,loadingMore:a,loadingNewSwaps:o,error:l,allLoaded:i,formatDate:d,loadMoreSwaps:m,copyToClipboard:U}}});var It=a(386);const Kt=(0,O.A)(Qt,[["render",Et],["__scopeId","data-v-129f9c41"]]),Wt=Kt;ut()(Qt,"components",{QList:ot.A,QItemLabel:rt.A,QItem:lt.A,QItemSection:st.A,QIcon:J.A,QBtn:nt.A,QTooltip:St.A,QSeparator:It.A,QSpinner:bt.A});const $t={class:"mint-graph-container"},Xt={ref:"svgRef"},Bt={key:0,class:"load-button-container"},Nt={key:2,class:"text-negative q-pa-md"},Ot={ref:"tooltip",class:"tooltip",style:{opacity:"0"}};function Vt(t,e,a,o,s,r){const i=(0,n.g2)("q-card-section"),c=(0,n.g2)("q-btn"),u=(0,n.g2)("q-spinner"),d=(0,n.g2)("MintSwapStats"),p=(0,n.g2)("q-card");return(0,n.uX)(),(0,n.Wv)(p,{class:"bg-dark"},{default:(0,n.k6)((()=>[(0,n.bF)(i,{class:"bg-dark text-light"},{default:(0,n.k6)((()=>e[1]||(e[1]=[(0,n.Lk)("h2",{class:"text-h6"},"Mint Graph",-1)]))),_:1}),(0,n.Lk)("div",$t,[((0,n.uX)(),(0,n.CE)("svg",Xt,null,512)),t.isLoaded?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",Bt,[(0,n.bF)(c,{label:"Load Graph",outline:"",color:"primary",onClick:t.loadGraph,loading:t.loading},null,8,["onClick","loading"])])),t.loading?((0,n.uX)(),(0,n.Wv)(u,{key:1,color:"primary",size:"50px",class:"q-my-md"})):(0,n.Q3)("",!0),t.error?((0,n.uX)(),(0,n.CE)("div",Nt,(0,l.v_)(t.error),1)):(0,n.Q3)("",!0),(0,n.Lk)("div",Ot,null,512)]),t.selectedMint?((0,n.uX)(),(0,n.Wv)(d,{key:0,modelValue:t.showSwapStats,"onUpdate:modelValue":e[0]||(e[0]=e=>t.showSwapStats=e),mint:t.selectedMint},null,8,["modelValue","mint"])):(0,n.Q3)("",!0)])),_:1})}var zt=a(2302),Pt=function(t,e,a,n){function o(t){return t instanceof a?t:new a((function(e){e(t)}))}return new(a||(a=Promise))((function(a,l){function s(t){try{i(n.next(t))}catch(e){l(e)}}function r(t){try{i(n["throw"](t))}catch(e){l(e)}}function i(t){t.done?a(t.value):o(t.value).then(s,r)}i((n=n.apply(t,e||[])).next())}))};const Ut=(0,n.pM)({name:"MintGraph",components:{MintSwapStats:pt},setup(){const t=(0,v.KR)(null),e=(0,v.KR)(null),a=(0,v.KR)(null),o=(0,v.KR)(!1),l=(0,v.KR)(""),s=(0,v.KR)(!1),r=(0,v.KR)(!1),i=(0,v.KR)(null);let c=null;const u=()=>Pt(this,void 0,void 0,(function*(){o.value=!0,l.value="";try{a.value=yield _(),d(),s.value=!0}catch(t){l.value="Error fetching mint graph.",console.error(t)}finally{o.value=!1}})),d=()=>{if(!a.value||!t.value)return;const n=a.value.nodes.map((t=>Object.assign({},t))),o=new Map(n.map((t=>[t.id,t]))),l=a.value.edges.map((t=>{const e=o.get(t.from_id),a=o.get(t.to_id);return e&&a?{source:e,target:a,count:t.count,total_amount:t.total_amount,state:t.state}:(console.error("Invalid edge: source or target node not found"),null)})).filter((t=>null!==t));zt.Ltv(t.value).selectAll("*").remove();const s=t.value.clientWidth||800,u=t.value.clientHeight||400,d=zt.Ltv(t.value).attr("width","100%").attr("height","100%").attr("viewBox",`0 0 ${s} ${u}`).attr("preserveAspectRatio","xMidYMid meet"),v=zt.s_O().scaleExtent([.1,4]).on("zoom",(t=>{f.attr("transform",t.transform)})),f=d.append("g");d.call(v);const g=s<600?-100:-200,h=s<600?150:250;d.append("defs").append("marker").attr("id","arrowhead").attr("viewBox","-0 -5 10 10").attr("refX",25).attr("refY",0).attr("orient","auto").attr("markerWidth",2).attr("markerHeight",2).attr("xoverflow","visible").append("svg:path").attr("d","M 0,-5 L 10,0 L 0,5").attr("fill","#aaa").style("stroke","none");const b=zt.Ltv(e.value);c=zt.tXi(n).force("link",zt.kJC(l).id((t=>t.id.toString())).distance(h).strength((t=>Math.log(t.count)/1e3))).force("charge",zt.xJS().strength(g)).force("center",zt.jTM(s/2,u/2)).force("x",zt.KS8(s/2).strength(.01)).force("y",zt.TSS(u/2).strength(.05)).on("tick",_);const k=f.append("g").attr("class","links").selectAll("path").data(l).enter().append("path").attr("stroke-width",(t=>Math.log(t.count)/2)).attr("stroke",(t=>"OK"===t.state?"#7b7":"#a66")).attr("stroke-opacity",.4).attr("fill","none").attr("marker-end","url(#arrowhead)").on("mouseover",((t,e)=>{b.style("opacity",1).html(`<strong>Edge:</strong><br>Count: ${e.count}<br>Total Amount: ${e.total_amount}`)})).on("mousemove",(t=>{b.style("left",`${t.clientX+10}px`).style("top",t.clientY-28+"px")})).on("mouseout",(()=>{b.style("opacity",0)})),w=f.append("g").attr("class","nodes").selectAll("circle").data(n).enter().append("circle").attr("r",10).attr("fill",(t=>m(t.state))).attr("stroke","#000").call(p(c)).on("mouseover",((t,e)=>{b.style("opacity",1).html(`<strong>Mint:</strong><br>Name: ${e.name||e.url}<br>Balance: ${e.balance}`)})).on("mousemove",(t=>{b.style("left",`${t.clientX+10}px`).style("top",t.clientY-28+"px")})).on("mouseout",(()=>{b.style("opacity",0)})).on("click",((t,e)=>{i.value={id:e.id,name:e.name||"",url:e.url||"",balance:e.balance,state:e.state,info:"",updated_at:(new Date).toISOString(),next_update:(new Date).toISOString(),n_errors:0,n_mints:0,n_melts:0,sum_donations:0},r.value=!0}));w.append("title").text((t=>`Name: ${t.name||t.url}\nBalance: ${t.balance}`));const y=f.append("g").attr("class","labels").selectAll("text").data(n).enter().append("text").attr("dx",20).attr("dy",".45em").text((t=>t.name||t.url||"")).attr("fill","#fff").style("font-weight","bold");function _(){k.attr("d",(t=>{const e=t.source,a=t.target,n=a.x-e.x,o=a.y-e.y,l=Math.sqrt(n*n+o*o);return`M${e.x},${e.y} A${l},${l} 0 0,1 ${a.x},${a.y}`})),w.attr("cx",(t=>t.x)).attr("cy",(t=>t.y)),y.attr("x",(t=>t.x)).attr("y",(t=>t.y))}},p=t=>{function e(e,a){e.active||t.alphaTarget(.3).restart(),a.fx=a.x,a.fy=a.y,e.sourceEvent.stopPropagation()}function a(t,e){e.fx=t.x,e.fy=t.y}function n(e,a){e.active||t.alphaTarget(0),a.fx=null,a.fy=null}return zt.$Er().on("start",e).on("drag",a).on("end",n)},m=t=>{switch(t){case"OK":return"green";case"WARN":return"yellow";case"ERROR":return"red";case"UNKNOWN":default:return"grey"}};return(0,n.sV)((()=>{})),(0,n.xo)((()=>{c&&c.stop()})),{svgRef:t,tooltipRef:e,loading:o,error:l,isLoaded:s,loadGraph:u,getStateColor:m,showSwapStats:r,selectedMint:i}}}),jt=(0,O.A)(Ut,[["render",Vt],["__scopeId","data-v-6d20227c"]]),Gt=jt;ut()(Ut,"components",{QCard:Z.A,QCardSection:tt.A,QBtn:nt.A,QSpinner:bt.A});const Yt={class:"q-px-md"},Zt={class:"text-h5"},Ht={class:"text-h5"},Jt={class:"text-caption"},te={class:"text-h5"},ee={class:"text-caption"},ae={class:"text-h5"},ne={class:"text-caption"},oe={key:1,class:"text-negative q-pa-md"};function le(t,e,a,o,s,r){const i=(0,n.g2)("q-separator"),c=(0,n.g2)("q-card-section"),u=(0,n.g2)("q-card"),d=(0,n.g2)("q-linear-progress");return(0,n.uX)(),(0,n.CE)("div",Yt,[(0,n.bF)(u,{flat:"",class:"bg-dark text-white"},{default:(0,n.k6)((()=>[(0,n.bF)(i),(0,n.bF)(c,{class:"row items-start q-gutter-md"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{class:"stat-card"},{default:(0,n.k6)((()=>[(0,n.bF)(c,null,{default:(0,n.k6)((()=>[e[0]||(e[0]=(0,n.Lk)("div",{class:"text-subtitle1"},"Total Balance",-1)),(0,n.Lk)("div",Zt,(0,l.v_)(t.formatNumber(t.stats.total_balance))+" sat",1)])),_:1})])),_:1}),(0,n.bF)(u,{class:"stat-card"},{default:(0,n.k6)((()=>[(0,n.bF)(c,null,{default:(0,n.k6)((()=>[e[1]||(e[1]=(0,n.Lk)("div",{class:"text-subtitle1"},"Total Swaps",-1)),(0,n.Lk)("div",Ht,(0,l.v_)(t.formatNumber(t.stats.total_swaps)),1),(0,n.Lk)("div",Jt," Last 24h: "+(0,l.v_)(t.formatNumber(t.stats.total_swaps_24h)),1)])),_:1})])),_:1}),(0,n.bF)(u,{class:"stat-card"},{default:(0,n.k6)((()=>[(0,n.bF)(c,null,{default:(0,n.k6)((()=>[e[2]||(e[2]=(0,n.Lk)("div",{class:"text-subtitle1"},"Total Amount Swapped",-1)),(0,n.Lk)("div",te,(0,l.v_)(t.formatNumber(t.stats.total_amount_swapped))+" sat",1),(0,n.Lk)("div",ee," Last 24h: "+(0,l.v_)(t.formatNumber(t.stats.total_amount_swapped_24h))+" sat ",1)])),_:1})])),_:1}),(0,n.bF)(u,{class:"stat-card"},{default:(0,n.k6)((()=>[(0,n.bF)(c,null,{default:(0,n.k6)((()=>[e[3]||(e[3]=(0,n.Lk)("div",{class:"text-subtitle1"},"Average Swap Time",-1)),(0,n.Lk)("div",ae,(0,l.v_)(t.formatTime(t.stats.average_swap_time)),1),(0,n.Lk)("div",ne," Last 24h: "+(0,l.v_)(t.formatTime(t.stats.average_swap_time_24h)),1)])),_:1})])),_:1})])),_:1}),t.loading?((0,n.uX)(),(0,n.Wv)(d,{key:0,indeterminate:"",color:"primary",class:"q-mt-sm"})):(0,n.Q3)("",!0),t.error?((0,n.uX)(),(0,n.CE)("div",oe,(0,l.v_)(t.error),1)):(0,n.Q3)("",!0)])),_:1})])}var se=function(t,e,a,n){function o(t){return t instanceof a?t:new a((function(e){e(t)}))}return new(a||(a=Promise))((function(a,l){function s(t){try{i(n.next(t))}catch(e){l(e)}}function r(t){try{i(n["throw"](t))}catch(e){l(e)}}function i(t){t.done?a(t.value):o(t.value).then(s,r)}i((n=n.apply(t,e||[])).next())}))};const re=(0,n.pM)({name:"StatsCard",setup(){const t=(0,v.KR)({total_balance:0,total_swaps:0,total_swaps_24h:0,total_amount_swapped:0,total_amount_swapped_24h:0,average_swap_time:0,average_swap_time_24h:0}),e=(0,v.KR)(!1),a=(0,v.KR)("");let o;const l=()=>se(this,void 0,void 0,(function*(){e.value=!0,a.value="";try{t.value=yield x()}catch(n){a.value="Error fetching service statistics.",console.error(n)}finally{e.value=!1}})),s=t=>t.toLocaleString(),r=t=>{if(0===t)return"N/A";const e=t/1e3;if(e<60)return`${e.toFixed(1)} s`;{const t=e/60;return`${t.toFixed(1)} min`}};return(0,n.sV)((()=>{l(),o=window.setInterval(l,3e5)})),(0,n.xo)((()=>{void 0!==o&&clearInterval(o)})),{stats:t,loading:e,error:a,formatNumber:s,formatTime:r}}});var ie=a(5859);const ce=(0,O.A)(re,[["render",le],["__scopeId","data-v-ef9ce3ee"]]),ue=ce;ut()(re,"components",{QCard:Z.A,QSeparator:It.A,QCardSection:tt.A,QLinearProgress:ie.A});const de={class:"q-px-md"};function pe(t,e,a,o,l,s){const r=(0,n.g2)("MintSwapBarChart"),i=(0,n.g2)("q-card-section"),c=(0,n.g2)("q-card");return(0,n.uX)(),(0,n.CE)("div",de,[(0,n.bF)(c,{class:"bg-dark text-white rounded-borders"},{default:(0,n.k6)((()=>[(0,n.bF)(i,null,{default:(0,n.k6)((()=>[(0,n.bF)(r,{swaps:t.swaps},null,8,["swaps"])])),_:1})])),_:1})])}var me=function(t,e,a,n){function o(t){return t instanceof a?t:new a((function(e){e(t)}))}return new(a||(a=Promise))((function(a,l){function s(t){try{i(n.next(t))}catch(e){l(e)}}function r(t){try{i(n["throw"](t))}catch(e){l(e)}}function i(t){t.done?a(t.value):o(t.value).then(s,r)}i((n=n.apply(t,e||[])).next())}))};const ve=(0,n.pM)({name:"GlobalSwapBarChart",components:{MintSwapBarChart:z},props:{maxSwaps:{type:Number,default:200}},setup(t){const e=(0,v.KR)([]),a=(0,v.KR)(!1),o=(0,v.KR)("");let l;const s=()=>me(this,void 0,void 0,(function*(){a.value=!0,o.value="";try{const a=yield y(0,t.maxSwaps);e.value=a.sort(((t,e)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()))}catch(n){o.value="Error fetching swaps.",console.error(n)}finally{a.value=!1}}));return(0,n.sV)((()=>{s(),l=window.setInterval(s,6e4)})),(0,n.xo)((()=>{void 0!==l&&clearInterval(l)})),{swaps:e,loading:a,error:o}}}),fe=(0,O.A)(ve,[["render",pe],["__scopeId","data-v-51361cf6"]]),ge=fe;ut()(ve,"components",{QCard:Z.A,QCardSection:tt.A});const he=(0,n.pM)({name:"IndexPage",components:{MintList:Ct,SwapList:Wt,MintGraph:Gt,StatsCard:ue,GlobalSwapBarChart:ge}}),be=(0,O.A)(he,[["render",o]]),ke=be}}]);