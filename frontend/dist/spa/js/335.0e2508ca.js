"use strict";(globalThis["webpackChunkcashu_auditor_frontend"]=globalThis["webpackChunkcashu_auditor_frontend"]||[]).push([[335],{2335:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var a=n(1758);function o(e,t,n,o,l,i){const r=(0,a.g2)("MintList"),s=(0,a.g2)("SwapList");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(r),(0,a.bF)(s)],64)}var l=n(9104),i=n(8790);const r={class:"q-pa-md"},s={key:0,class:"text-negative q-pa-md"},c={class:"text-left"},u={class:"text-left"},d={class:"text-left"};function m(e,t,n,o,m,f){const p=(0,a.g2)("q-btn"),v=(0,a.g2)("q-spinner"),b=(0,a.g2)("q-input"),k=(0,a.g2)("q-card"),_=(0,a.g2)("q-icon"),g=(0,a.g2)("q-table");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",r,[(0,a.bF)(k,null,{default:(0,a.k6)((()=>[(0,a.bF)(b,{filled:"",modelValue:e.token,"onUpdate:modelValue":t[0]||(t[0]=t=>e.token=t),label:"Enter Token",onKeyup:(0,l.jR)(e.submitToken,["enter"])},{append:(0,a.k6)((()=>[(0,a.bF)(p,{label:"Submit",color:"primary",onClick:e.submitToken},null,8,["onClick"]),e.loading?((0,a.uX)(),(0,a.Wv)(v,{key:0,size:"50px",class:"q-my-md",color:"primary"})):(0,a.Q3)("",!0)])),_:1},8,["modelValue","onKeyup"])])),_:1})]),e.error?((0,a.uX)(),(0,a.CE)("div",s,(0,i.v_)(e.error),1)):(0,a.Q3)("",!0),(0,a.bF)(g,{title:"Mints",rows:e.mints,grid:e.$q.screen.xs,columns:e.columns,"row-key":"id",loading:e.loading,"hide-bottom":e.mints.length>0,"rows-per-page-options":[0]},{"body-cell-updated_at":(0,a.k6)((t=>[(0,a.Lk)("td",c,(0,i.v_)(e.formatDate(t.row.updated_at)),1)])),"body-cell-next_update":(0,a.k6)((t=>[(0,a.Lk)("td",u,(0,i.v_)(e.formatDate(t.row.next_update)),1)])),"body-cell-state":(0,a.k6)((e=>[(0,a.Lk)("td",d,[(0,a.bF)(_,{name:"OK"===e.row.state?"check_circle":"cancel",color:"OK"===e.row.state?"positive":"negative"},null,8,["name","color"])])])),_:1},8,["rows","grid","columns","loading","hide-bottom"])])}var f=n(8734),p=n(2303);const v=p.A.create({baseURL:"http://127.0.0.1:8000",headers:{"Content-Type":"application/json"}}),b=v;var k=function(e,t,n,a){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,l){function i(e){try{s(a.next(e))}catch(t){l(t)}}function r(e){try{s(a["throw"](e))}catch(t){l(t)}}function s(e){e.done?n(e.value):o(e.value).then(i,r)}s((a=a.apply(e,t||[])).next())}))};const _=(e=0,t=0)=>k(void 0,void 0,void 0,(function*(){const n=yield b.get("/mints/",{params:{skip:e,limit:t}});return console.log("API Response:",n.data),n.data})),g=e=>k(void 0,void 0,void 0,(function*(){const t=yield b.post("/mints/",e);return console.log("API Response:",t.data),t.data})),y=(e=0,t=10)=>k(void 0,void 0,void 0,(function*(){const n=yield b.get("/swaps/",{params:{skip:e,limit:t}});return console.log("API Response:",n.data),n.data}));var h=function(e,t,n,a){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,l){function i(e){try{s(a.next(e))}catch(t){l(t)}}function r(e){try{s(a["throw"](e))}catch(t){l(t)}}function s(e){e.done?n(e.value):o(e.value).then(i,r)}s((a=a.apply(e,t||[])).next())}))};const w=(0,a.pM)({name:"MintList",setup(){const e=(0,f.KR)(""),t=(0,f.KR)([]),n=(0,f.KR)(!1),o=(0,f.KR)(""),l=[{name:"url",label:"Mint URL",field:"url",sortable:!0,align:"left"},{name:"name",label:"Name",field:"name",sortable:!0,align:"left"},{name:"balance",label:"Balance (sat)",field:"balance",sortable:!0,align:"left"},{name:"sum_donations",label:"Total donated (sat)",field:"sum_donations",sortable:!0,align:"left"},{name:"updated_at",label:"Updated At",field:"updated_at",sortable:!0,align:"left"},{name:"state",label:"State",field:"state",sortable:!0,align:"left"},{name:"n_errors",label:"Errors",field:"n_errors",sortable:!0,align:"left"},{name:"n_mints",label:"Mints",field:"n_mints",sortable:!0,align:"left"},{name:"n_melts",label:"Melts",field:"n_melts",sortable:!0,align:"left"}];let i;const r=()=>h(this,void 0,void 0,(function*(){n.value=!0,o.value="";try{t.value=yield _(0,0)}catch(e){o.value="Error fetching mints.",console.error(e)}finally{n.value=!1}})),s=()=>h(this,void 0,void 0,(function*(){if(e.value){n.value=!0,o.value="";try{yield g({token:e.value}),e.value="",yield r()}catch(t){o.value="Error submitting token.",console.error(t)}finally{n.value=!1}}})),c=e=>new Date(e).toLocaleString();return(0,a.sV)((()=>{r(),i=window.setInterval(r,6e4)})),(0,a.xo)((()=>{void 0!==i&&clearInterval(i)})),{token:e,mints:t,columns:l,loading:n,error:o,submitToken:s,formatDate:c}}});var x=n(2807),F=n(3316),q=n(9270),A=n(2374),L=n(564),Q=n(5107),I=n(492),K=n(8582),R=n.n(K);const C=(0,x.A)(w,[["render",m],["__scopeId","data-v-577f0f63"]]),E=C;R()(w,"components",{QCard:F.A,QInput:q.A,QBtn:A.A,QSpinner:L.A,QTable:Q.A,QIcon:I.A});const S={key:1,class:"text-negative q-pa-md"};function T(e,t,n,o,l,r){const s=(0,a.g2)("q-item-label"),c=(0,a.g2)("q-icon"),u=(0,a.g2)("q-item-section"),d=(0,a.g2)("q-item"),m=(0,a.g2)("q-separator"),f=(0,a.g2)("q-spinner"),p=(0,a.g2)("q-list");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(p,{bordered:"",padding:"",class:"q-pa-md"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{header:"",class:"text-h6 q-mb-md"},{default:(0,a.k6)((()=>t[0]||(t[0]=[(0,a.eW)("Recent Swaps")]))),_:1}),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.swaps,(n=>((0,a.uX)(),(0,a.CE)("div",{key:n.id},[(0,a.bF)(d,{clickable:"",class:"q-my-md"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{avatar:""},{default:(0,a.k6)((()=>[(0,a.bF)(c,{name:"OK"===n.state?"check_circle":"cancel",color:"OK"===n.state?"positive":"negative"},null,8,["name","color"])])),_:2},1024),(0,a.bF)(u,null,{default:(0,a.k6)((()=>[(0,a.bF)(s,null,{default:(0,a.k6)((()=>[t[1]||(t[1]=(0,a.Lk)("span",{class:"text-bold"},"From:",-1)),(0,a.eW)(" "+(0,i.v_)(n.from_url),1)])),_:2},1024),(0,a.bF)(s,null,{default:(0,a.k6)((()=>[t[2]||(t[2]=(0,a.Lk)("span",{class:"text-bold"},"To:",-1)),(0,a.eW)(" "+(0,i.v_)(n.to_url),1)])),_:2},1024),(0,a.bF)(s,null,{default:(0,a.k6)((()=>[t[3]||(t[3]=(0,a.Lk)("span",{class:"text-bold"},"Amount:",-1)),(0,a.eW)(" "+(0,i.v_)(n.amount)+" sat ",1)])),_:2},1024),"OK"==n.state?((0,a.uX)(),(0,a.Wv)(s,{key:0,caption:""},{default:(0,a.k6)((()=>[t[4]||(t[4]=(0,a.Lk)("span",{class:"text-bold"},"Fee:",-1)),(0,a.eW)(" "+(0,i.v_)(n.fee)+" sat ",1),n.time_taken?((0,a.uX)(),(0,a.Wv)(s,{key:0,caption:""},{default:(0,a.k6)((()=>[(0,a.eW)("Payment took "+(0,i.v_)(n.time_taken)+" ms",1)])),_:2},1024)):(0,a.Q3)("",!0)])),_:2},1024)):(0,a.Q3)("",!0)])),_:2},1024),(0,a.bF)(u,{side:"",top:""},{default:(0,a.k6)((()=>[(0,a.bF)(s,{caption:""},{default:(0,a.k6)((()=>[(0,a.eW)((0,i.v_)(e.formatDate(n.created_at)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,a.bF)(m)])))),128)),e.loading?((0,a.uX)(),(0,a.Wv)(f,{key:0,color:"primary",size:"50px",class:"q-my-md"})):(0,a.Q3)("",!0),e.error?((0,a.uX)(),(0,a.CE)("div",S,(0,i.v_)(e.error),1)):(0,a.Q3)("",!0)])),_:1})])}var W=function(e,t,n,a){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,l){function i(e){try{s(a.next(e))}catch(t){l(t)}}function r(e){try{s(a["throw"](e))}catch(t){l(t)}}function s(e){e.done?n(e.value):o(e.value).then(i,r)}s((a=a.apply(e,t||[])).next())}))};const X=(0,a.pM)({name:"SwapList",setup(){const e=(0,f.KR)([]),t=(0,f.KR)(!1),n=(0,f.KR)("");let o;const l=()=>W(this,void 0,void 0,(function*(){t.value=!0,n.value="";try{e.value=yield y(0,10),e.value.sort(((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()))}catch(a){n.value="Error fetching swaps.",console.error(a)}finally{t.value=!1}})),i=e=>new Date(e).toLocaleString();return(0,a.sV)((()=>{l(),o=window.setInterval(l,6e4)})),(0,a.xo)((()=>{void 0!==o&&clearInterval(o)})),{swaps:e,loading:t,error:n,formatDate:i}}});var M=n(3999),D=n(3796),P=n(124),O=n(5173),V=n(386);const U=(0,x.A)(X,[["render",T],["__scopeId","data-v-10b8d9a3"]]),j=U;R()(X,"components",{QList:M.A,QItemLabel:D.A,QItem:P.A,QItemSection:O.A,QIcon:I.A,QSeparator:V.A,QSpinner:L.A});const z=(0,a.pM)({name:"IndexPage",components:{MintList:E,SwapList:j}}),B=(0,x.A)(z,[["render",o]]),N=B}}]);